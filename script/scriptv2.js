let html_5stars = `<svg class="c-svg__5times" xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 0 24 24" width="18"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"/></svg><svg class="c-svg__5times" xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 0 24 24" width="18"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"/></svg><svg class="c-svg__5times" xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 0 24 24" width="18"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"/></svg><svg class="c-svg__5times" xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 0 24 24" width="18"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"/></svg><svg class="c-svg__5times" xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 0 24 24" width="18"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"/></svg>`;

let html_4stars = `<svg class="c-svg__4times" xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 0 24 24" width="18"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"/></svg><svg class="c-svg__4times" xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 0 24 24" width="18"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"/></svg><svg class="c-svg__4times" xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 0 24 24" width="18"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"/></svg><svg class="c-svg__4times" xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 0 24 24" width="18"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"/></svg>`;
let html_3stars = `<svg class="c-svg__3times" xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 0 24 24" width="18"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"/></svg><svg class="c-svg__3times" xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 0 24 24" width="18"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"/></svg><svg class="c-svg__3times" xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 0 24 24" width="18"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"/></svg>`;
let html_2stars = `<svg class="c-svg__2times" xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 0 24 24" width="18"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"/></svg><svg class="c-svg__2times" xmlns="http://www.w3.org/2000/svg" height="18" viewBox="0 0 24 24" width="18"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-2z"/></svg>`;

let showResult = (queryResponse) => {
    let filterMixed = queryResponse.filter(element => element.steamRatingText == "Very Positive");
    var item1 = filterMixed[Math.floor(Math.random() * filterMixed.length)];
    while (item1.title == "Fire") {
        var item1 = filterMostlyPositive[Math.floor(Math.random() * filterMostlyPositive.length)];
    }
    var item2 = filterMixed[Math.floor(Math.random() * filterMixed.length)];
    while (item2.title == "Fire") {
        var item2 = filterMostlyPositive[Math.floor(Math.random() * filterMostlyPositive.length)];
    }

    while (item1 == item2) {
        var item1 = filterMixed[Math.floor(Math.random() * filterMixed.length)];
        var item2 = filterMixed[Math.floor(Math.random() * filterMixed.length)];
    }

    // de game Anno 1800 geeft een ander formaat terug dat ik niet kan gebruiken
    let filterMostlyPositive = queryResponse.filter(element => element.steamRatingText == "Mostly Positive");
    var item3 = filterMostlyPositive[Math.floor(Math.random() * filterMostlyPositive.length)];
    while (item3.title == "Anno 1800" || item3.title == "Fire") {
        var item3 = filterMostlyPositive[Math.floor(Math.random() * filterMostlyPositive.length)];
    }
    var item4 = filterMostlyPositive[Math.floor(Math.random() * filterMostlyPositive.length)];
    while (item4.title == "Anno 1800" || item4.title == "Fire") {
        var item4 = filterMostlyPositive[Math.floor(Math.random() * filterMostlyPositive.length)];
    }

    while (item3 == item4) {
        var item3 = filterMixed[Math.floor(Math.random() * filterMixed.length)];
        var item4 = filterMixed[Math.floor(Math.random() * filterMixed.length)];
    }

    let filterPositive = queryResponse.filter(element => element.steamRatingText == "Mixed");
    var item5 = filterPositive[Math.floor(Math.random() * filterPositive.length)];
    var item6 = filterPositive[Math.floor(Math.random() * filterPositive.length)];

    while (item5 == item6) {
        var item5 = filterMixed[Math.floor(Math.random() * filterMixed.length)];
        var item6 = filterMixed[Math.floor(Math.random() * filterMixed.length)];
    }

    cheapGame1(item1);
    cheapGame2(item2);
    cheapGame3(item3);
    cheapGame4(item4);
    cheapGame5(item5);
    cheapGame6(item6);

    // for (const obj of queryResponse) {
    //     console.log(obj)
    // }
};

const cheapGame1 = function(item) {

    const gameTitle = document.querySelector(".js-title");
    gameTitle.innerHTML = `${item.title}`;

    const gameDiscount = document.querySelector(".js-discount");
    gameDiscount.innerHTML = `€ ${item.salePrice}`;

    const gamaNormalprice = document.querySelector(".js-normalprice");
    gamaNormalprice.innerHTML = `€ ${item.normalPrice}`;

    const gameThumb = document.querySelector(".js-thumb");
    gameThumb.innerHTML = `<img class="c-thumbnail" src="${item.thumb}" alt="">`;
    
    const gameRating = document.querySelector(".js-rating");
    if (item.steamRatingPercent > 85) {
        gameRating.innerHTML = html_5stars;
    }
    else if (item.steamRatingPercent > 80 && item.steamRatingPercent < 85) {
        gameRating.innerHTML = html_4stars;
    }
    else if (item.steamRatingPercent > 70 && item.steamRatingPercent < 80) {
        gameRating.innerHTML = html_3stars;
    }
    else if (item.steamRatingPercent > 50 && item.steamRatingPercent < 70) {
        gameRating.innerHTML = html_2stars;
    }
    
};

const cheapGame2 = function(item) {

    const gameTitle = document.querySelector(".js-title2");
    gameTitle.innerHTML = `${item.title}`;

    const gameDiscount = document.querySelector(".js-discount2");
    gameDiscount.innerHTML = `€ ${item.salePrice}`;

    const gamaNormalprice = document.querySelector(".js-normalprice2");
    gamaNormalprice.innerHTML = `€ ${item.normalPrice}`;

    const gameThumb = document.querySelector(".js-thumb2");
    gameThumb.innerHTML = `<img class="c-thumbnail" src="${item.thumb}" alt="">`;
    
    const gameRating = document.querySelector(".js-rating2");
    if (item.steamRatingPercent > 85) {
        gameRating.innerHTML = html_5stars;
    }
    else if (item.steamRatingPercent > 80 && item.steamRatingPercent < 85) {
        gameRating.innerHTML = html_4stars;
    }
    else if (item.steamRatingPercent > 70 && item.steamRatingPercent < 80) {
        gameRating.innerHTML = html_3stars;
    }
    else if (item.steamRatingPercent > 50 && item.steamRatingPercent < 70) {
        gameRating.innerHTML = html_2stars;
    }
};

const cheapGame3 = function(item) {

    const gameTitle = document.querySelector(".js-title3");
    gameTitle.innerHTML = `${item.title}`;

    const gameDiscount = document.querySelector(".js-discount3");
    gameDiscount.innerHTML = `€ ${item.salePrice}`;

    const gamaNormalprice = document.querySelector(".js-normalprice3");
    gamaNormalprice.innerHTML = `€ ${item.normalPrice}`;

    const gameThumb = document.querySelector(".js-thumb3");
    gameThumb.innerHTML = `<img class="c-thumbnail" src="${item.thumb}" alt="">`;
    
    const gameRating = document.querySelector(".js-rating3");
    if (item.steamRatingPercent > 85) {
        gameRating.innerHTML = html_5stars;
    }
    else if (item.steamRatingPercent > 80 && item.steamRatingPercent < 85) {
        gameRating.innerHTML = html_4stars;
    }
    else if (item.steamRatingPercent > 70 && item.steamRatingPercent < 80) {
        gameRating.innerHTML = html_3stars;
    }
    else if (item.steamRatingPercent > 50 && item.steamRatingPercent < 70) {
        gameRating.innerHTML = html_2stars;
    }
};

const cheapGame4 = function(item) {

    const gameTitle = document.querySelector(".js-title4");
    gameTitle.innerHTML = `${item.title}`;

    const gameDiscount = document.querySelector(".js-discount4");
    gameDiscount.innerHTML = `€ ${item.salePrice}`;

    const gamaNormalprice = document.querySelector(".js-normalprice4");
    gamaNormalprice.innerHTML = `€ ${item.normalPrice}`;

    const gameThumb = document.querySelector(".js-thumb4");
    gameThumb.innerHTML = `<img class="c-thumbnail" src="${item.thumb}" alt="">`;
    
    const gameRating = document.querySelector(".js-rating4");
    if (item.steamRatingPercent > 85) {
        gameRating.innerHTML = html_5stars;
    }
    else if (item.steamRatingPercent > 80 && item.steamRatingPercent < 85) {
        gameRating.innerHTML = html_4stars;
    }
    else if (item.steamRatingPercent > 70 && item.steamRatingPercent < 80) {
        gameRating.innerHTML = html_3stars;
    }
    else if (item.steamRatingPercent > 50 && item.steamRatingPercent < 70) {
        gameRating.innerHTML = html_2stars;
    }
};

const cheapGame5 = function(item) {

    const gameTitle = document.querySelector(".js-title5");
    gameTitle.innerHTML = `${item.title}`;

    const gameDiscount = document.querySelector(".js-discount5");
    gameDiscount.innerHTML = `€ ${item.salePrice}`;

    const gamaNormalprice = document.querySelector(".js-normalprice5");
    gamaNormalprice.innerHTML = `€ ${item.normalPrice}`;

    const gameThumb = document.querySelector(".js-thumb5");
    gameThumb.innerHTML = `<img class="c-thumbnail" src="${item.thumb}" alt="">`;
    
    const gameRating = document.querySelector(".js-rating5");
    if (item.steamRatingPercent > 85) {
        gameRating.innerHTML = html_5stars;
    }
    else if (item.steamRatingPercent > 80 && item.steamRatingPercent < 85) {
        gameRating.innerHTML = html_4stars;
    }
    else if (item.steamRatingPercent > 70 && item.steamRatingPercent < 80) {
        gameRating.innerHTML = html_3stars;
    }
    else if (item.steamRatingPercent > 50 && item.steamRatingPercent < 70) {
        gameRating.innerHTML = html_2stars;
    }
};

const cheapGame6 = function(item) {

    const gameTitle = document.querySelector(".js-title6");
    gameTitle.innerHTML = `${item.title}`;

    const gameDiscount = document.querySelector(".js-discount6");
    gameDiscount.innerHTML = `€ ${item.salePrice}`;

    const gamaNormalprice = document.querySelector(".js-normalprice6");
    gamaNormalprice.innerHTML = `€ ${item.normalPrice}`;

    const gameThumb = document.querySelector(".js-thumb6");
    gameThumb.innerHTML = `<img class="c-thumbnail" src="${item.thumb}" alt="">`;
    
    const gameRating = document.querySelector(".js-rating6");
    if (item.steamRatingPercent > 85) {
        gameRating.innerHTML = html_5stars;
    }
    else if (item.steamRatingPercent > 80 && item.steamRatingPercent < 85) {
        gameRating.innerHTML = html_4stars;
    }
    else if (item.steamRatingPercent > 70 && item.steamRatingPercent < 80) {
        gameRating.innerHTML = html_3stars;
    }
    else if (item.steamRatingPercent > 50 && item.steamRatingPercent < 70) {
        gameRating.innerHTML = html_2stars;
    }
};

const getAPI = async () => {
    const data = await fetch(`https://www.cheapshark.com/api/1.0/deals?storeID=2`)
        .then((r) => r.json())
        .catch((err) => console.error('An error occured', err));
        showResult(data);
    //console.log(data);
};

const getAPIparam = async (lowerprice, upperprice) => {
    const data = await fetch(`https://www.cheapshark.com/api/1.0/deals?storeID=2&lowerPrice=${lowerprice}&upperPrice=${upperprice}&onSale=1`)
        .then((r) => r.json())
        .catch((err) => console.error('An error occured', err));
        showResult(data);
};

document.addEventListener('DOMContentLoaded', function() {
    getAPI();

    const btn_zeerpositief = document.querySelector(".js-zeerpositief");
    btn_zeerpositief.addEventListener('click', event => {
        getAPIparam(0, 10);
    });

    const btn_positief = document.querySelector(".js-positief");
    btn_positief.addEventListener('click', event => {
        getAPIparam(10, 15);
    });

    const btn_gemiddeld = document.querySelector(".js-gemiddeld");
    btn_gemiddeld.addEventListener('click', event => {
        getAPIparam(15, 30);
    });
});